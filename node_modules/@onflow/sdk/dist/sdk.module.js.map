{"version":3,"file":"sdk.module.js","sources":["../src/interaction/interaction.js","../src/build/build.js","../src/response/response.js","../src/send/unary.js","../src/send/send-transaction.js","../src/send/send-get-transaction.js","../src/send/send-execute-script.js","../src/send/send-get-account.js","../src/send/send-get-events.js","../src/send/send-get-block.js","../src/send/send-get-latest-block.js","../src/send/send-get-block-by-id.js","../src/send/send-get-block-by-height.js","../src/send/sdk-send.js","../src/send/send-get-transaction-status.js","../src/send/send-ping.js","../src/build/build-get-block.js","../src/build/build-get-account.js","../src/decode/decode.js","../src/resolve/resolve-ref-block-id.js","../src/resolve/resolve-cadence.js","../src/resolve/resolve-arguments.js","../src/resolve/resolve-accounts.js","../src/encode/encode.js","../src/resolve/resolve-signatures.js","../src/resolve/resolve-validators.js","../src/resolve/resolve.js","../src/resolve/resolve-final-normalization.js","../src/send/send.js","../src/decode/sdk-decode.js","../src/latest-block/latest-block.js","../src/account/account.js","../src/build/build-authorizations.js","../src/build/build-validator.js","../src/build/build-at-block-height.js","../src/build/build-at-block-id.js","../src/build/build-get-events.js","../src/build/build-get-events-at-block-height-range.js","../src/build/build-get-events-at-block-ids.js","../src/build/build-get-block-header.js","../src/build/build-get-latest-block.js","../src/build/build-get-block-by-id.js","../src/build/build-get-block-by-height.js","../src/build/build-get-transaction-status.js","../src/build/build-get-transaction.js","../src/build/build-limit.js","../src/build/build-params.js","../src/build/build-arguments.js","../src/build/build-proposer.js","../src/build/build-payer.js","../src/build/build-ping.js","../src/build/build-ref.js","../src/build/build-script.js","../src/build/build-transaction.js","../src/build/build-invariant.js","../src/resolve/resolve-params.js"],"sourcesContent":["export const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const GET_LATEST_BLOCK /*              */ = \"GET_LATEST_BLOCK\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK_BY_ID /*               */ = \"GET_BLOCK_BY_ID\"\nexport const GET_BLOCK_BY_HEIGHT /*           */ = \"GET_BLOCK_BY_HEIGHT\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /* */ = \"ACCOUNT\"\nexport const PARAM /*   */ = \"PARAM\"\nexport const ARGUMENT /**/ = \"ARGUMENT\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":null,\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst isArray = (d) => Array.isArray(d)\nconst isObj = (d) => typeof d === \"object\"\nconst isNull = (d) => d == null\nconst isNumber = (d) => typeof d === \"number\"\nconst isFn = (d) => typeof d === \"function\"\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\n\nexport const isInteraction = (ix) => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = (ix) => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = (wat) => (ix) => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nconst makeAccount = (acct, tempId) => (ix) => {\n  ix.accounts[tempId] = JSON.parse(ACCT)\n  ix.accounts[tempId].tempId = tempId\n  ix.accounts[tempId].addr = acct.addr\n  ix.accounts[tempId].keyId = acct.keyId\n  ix.accounts[tempId].sequenceNum = acct.sequenceNum\n  ix.accounts[tempId].signature = acct.signature\n  ix.accounts[tempId].signingFunction = acct.signingFunction\n  ix.accounts[tempId].resolve = acct.resolve\n  ix.accounts[tempId].role = {\n    ...ix.accounts[tempId].role,\n    ...acct.role,\n  }\n  return Ok(ix)\n}\n\nexport const makeAuthorizer = (acct) => (ix) => {\n  let tempId = uuid()\n  ix.authorizations.push(tempId)\n  return Ok(pipe(ix, [makeAccount(acct, tempId)]))\n}\n\nexport const makeProposer = (acct) => (ix) => {\n  let tempId = uuid()\n  ix.proposer = tempId\n  return Ok(pipe(ix, [makeAccount(acct, tempId)]))\n}\n\nexport const makePayer = (acct) => (ix) => {\n  let tempId = uuid()\n  ix.payer = tempId\n  return Ok(pipe(ix, [makeAccount(acct, tempId)]))\n} \n\nexport const makeParam = (param) => (ix) => {\n  let tempId = uuid()\n  ix.message.params.push(tempId)\n\n  ix.params[tempId] = JSON.parse(PRM)\n  ix.params[tempId].tempId = tempId\n  ix.params[tempId].key = param.key\n  ix.params[tempId].value = param.value\n  ix.params[tempId].asParam = param.asParam\n  ix.params[tempId].xform = param.xform\n  ix.params[tempId].resolve = param.resolve\n  return Ok(ix)\n}\n\nexport const makeArgument = (arg) => (ix) => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makeGetLatestBlock /*          */ = makeIx(GET_LATEST_BLOCK)\nexport const makeGetBlockById /*            */ = makeIx(GET_BLOCK_BY_ID)\nexport const makeGetBlockByHeight /*        */ = makeIx(GET_BLOCK_BY_HEIGHT)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\n\nconst is = (wat) => (ix) => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isGetLatestBlock /*          */ = is(GET_LATEST_BLOCK)\nexport const isGetBlockById /*            */ = is(GET_BLOCK_BY_ID)\nexport const isGetBlockByHeight /*        */ = is(GET_BLOCK_BY_HEIGHT)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\n\nexport const isOk /*  */ = (ix) => ix.status === OK\nexport const isBad /* */ = (ix) => ix.status === BAD\nexport const why /*   */ = (ix) => ix.reason\n\nexport const isAccount /*  */ = (account) => account.kind === ACCOUNT\nexport const isParam /*    */ = (param) => param.kind === PARAM\nexport const isArgument /* */ = (argument) => argument.kind === ARGUMENT\n\nconst hardMode = (ix) => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return (d) => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = (v) => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => (ix) => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => (ix) => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = (key) => (ix) => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","const DEFAULT_RESPONSE =\n'{\"tag\": 0, \"transaction\":null, \"transactionId\":null, \"encodedData\":null, \"events\": null, \"account\": null}'\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {grpc} from \"@improbable-eng/grpc-web\"\nimport {NodeHttpTransport} from \"@improbable-eng/grpc-web-node-http-transport\"\n\ngrpc.setDefaultTransport(NodeHttpTransport())\n\nexport async function unary(host, method, request) {\n  return new Promise((resolve, reject) => {\n    grpc.unary(method, {\n      request: request,\n      host: host,\n      onEnd: ({status, statusMessage, message}) => {\n        if (status === grpc.Code.OK) {\n          resolve(message)\n        } else {\n          reject(new Error(statusMessage))\n        }\n      },\n    })\n  })\n}\n","import {AccessAPI, Transaction, SendTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nexport async function sendTransaction(ix, opts = {}) {\n  ix = await ix\n\n  const tx = new Transaction()\n  tx.setScript(scriptBuffer(ix.message.cadence))\n  tx.setGasLimit(ix.message.computeLimit)\n  tx.setReferenceBlockId(\n    ix.message.refBlock ? hexBuffer(ix.message.refBlock) : null\n  )\n  tx.setPayer(addressBuffer(sansPrefix(ix.accounts[ix.payer].addr)))\n  ix.message.arguments.forEach(arg =>\n    tx.addArguments(argumentBuffer(ix.arguments[arg].asArgument))\n  )\n  ix.authorizations\n    .map(tempId => ix.accounts[tempId].addr)\n    .reduce((prev, current) => {\n      return prev.find(item => item === current) ? prev : [...prev, current]\n    }, [])\n    .forEach(addr => tx.addAuthorizers(addressBuffer(sansPrefix(addr))))\n\n  const proposalKey = new Transaction.ProposalKey()\n  proposalKey.setAddress(\n    addressBuffer(sansPrefix(ix.accounts[ix.proposer].addr))\n  )\n  proposalKey.setKeyId(ix.accounts[ix.proposer].keyId)\n  proposalKey.setSequenceNumber(ix.accounts[ix.proposer].sequenceNum)\n\n  tx.setProposalKey(proposalKey)\n\n  // Apply Non Payer Signatures to Payload Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (!acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addPayloadSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying payload signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  // Apply Payer Signatures to Envelope Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addEnvelopeSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying envelope signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  const req = new SendTransactionRequest()\n  req.setTransaction(tx)\n\n  var t1 = Date.now()\n  const res = await unary(opts.node, AccessAPI.SendTransaction, req)\n  var t2 = Date.now()\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.transactionId = u8ToHex(res.getId_asU8())\n\n  if (typeof window !== \"undefined\") {\n    window.dispatchEvent(\n      new CustomEvent(\"FLOW::TX\", {\n        detail: {txId: ret.transactionId, delta: t2 - t1},\n      })\n    )\n  }\n\n  return ret\n}\n","import {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetTransaction(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransaction, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  const unwrapKey = key => ({\n    address: u8ToHex(key.getAddress_asU8()),\n    keyId: key.getKeyId(),\n    sequenceNumber: key.getSequenceNumber()\n  })\n\n  const unwrapSignature = sig => ({\n    address: u8ToHex(sig.getAddress_asU8()),\n    keyId: sig.getKeyId(),\n    signature: u8ToHex(sig.getSignature_asU8())\n  })\n\n  let transaction = res.getTransaction()\n  ret.transaction = {\n      script: Buffer.from(transaction.getScript_asU8()).toString(\"utf8\"),\n      args: (transaction.getArgumentsList()).map(arg => JSON.parse(Buffer.from(arg).toString(\"utf8\"))),\n      referenceBlockId: u8ToHex(transaction.getReferenceBlockId_asU8()),\n      gasLimit: transaction.getGasLimit(),\n      proposalKey: unwrapKey(transaction.getProposalKey()),\n      payer: u8ToHex(transaction.getPayer_asU8()),\n      authorizers: (transaction.getAuthorizersList()).map(u8ToHex),\n      payloadSignatures: (transaction.getPayloadSignaturesList()).map(unwrapSignature),\n      envelopeSignatures: (transaction.getEnvelopeSignaturesList()).map(unwrapSignature)\n  }\n\n  return ret\n}\n","import {ExecuteScriptAtLatestBlockRequest, ExecuteScriptAtBlockIDRequest, ExecuteScriptAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendExecuteScript(ix, opts = {}) {\n  ix = await ix\n\n  let req\n  let res\n  if (ix.block.id) {\n    req = new ExecuteScriptAtBlockIDRequest()\n    \n    req.setBlockId(hexBuffer(ix.block.id))\n\n    const code = Buffer.from(ix.message.cadence, \"utf8\")\n    ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n    req.setScript(code)\n\n    res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockID, req)\n  } else if (ix.block.height) {\n    req = new ExecuteScriptAtBlockHeightRequest()\n\n    req.setBlockHeight(Number(ix.block.height))\n\n    const code = Buffer.from(ix.message.cadence, \"utf8\")\n    ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n    req.setScript(code)\n\n    res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockHeight, req)\n  } else {\n    req = new ExecuteScriptAtLatestBlockRequest()\n\n    const code = Buffer.from(ix.message.cadence, \"utf8\")\n    ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n    req.setScript(code)\n\n    res = await unary(opts.node, AccessAPI.ExecuteScriptAtLatestBlock, req)\n  }\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.encodedData = JSON.parse(Buffer.from(res.getValue_asU8()).toString(\"utf8\"))\n\n  return ret\n}\n","import {GetAccountAtLatestBlockRequest, GetAccountAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix, withPrefix} from \"@onflow/util-address\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\n\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\n\nexport async function sendGetAccount(ix, opts = {}) {\n  ix = await ix\n\n  const req = ix.block.height ? new GetAccountAtBlockHeightRequest() : new GetAccountAtLatestBlockRequest()\n  if (ix.block.height) req.setHeight(Number(ix.block.height))\n  req.setAddress(addressBuffer(sansPrefix(ix.account.addr)))\n\n  const res = await unary(opts.node, ix.block.height ? AccessAPI.GetAccountAtBlockHeight : AccessAPI.GetAccountAtLatestBlock, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  const account = res.getAccount()\n\n  let contractsMap;\n  const contracts = (contractsMap = account.getContractsMap()) ? contractsMap.getEntryList().reduce((acc, contract) => ({\n    ...acc,\n    [contract[0]]: new TextDecoder(\"utf-8\").decode(contract[1] || new UInt8Array())\n  }), {}) : {}\n\n  ret.account = {\n    address: withPrefix(u8ToHex(account.getAddress_asU8())),\n    balance: account.getBalance(),\n    code: new TextDecoder(\"utf-8\").decode(account.getCode_asU8() || new UInt8Array()),\n    contracts,\n    keys: account.getKeysList().map(publicKey => ({\n      index: publicKey.getIndex(),\n      publicKey: u8ToHex(publicKey.getPublicKey_asU8()),\n      signAlgo: publicKey.getSignAlgo(),\n      hashAlgo: publicKey.getHashAlgo(),\n      weight: publicKey.getWeight(),\n      sequenceNumber: publicKey.getSequenceNumber(),\n      revoked: publicKey.getRevoked(),\n    })),\n  }\n\n  return ret\n}\n","import {GetEventsForHeightRangeRequest, GetEventsForBlockIDsRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetEvents(ix, opts = {}) {\n  ix = await ix\n \n  let res\n  const req = ix.events.start ? new GetEventsForHeightRangeRequest() : new GetEventsForBlockIDsRequest()\n  req.setType(ix.events.eventType)\n  \n  if (ix.events.start) {\n    req.setStartHeight(Number(ix.events.start))\n    req.setEndHeight(Number(ix.events.end))\n\n    res = await unary(opts.node, AccessAPI.GetEventsForHeightRange, req)\n  } else {\n    ix.events.blockIds.forEach(id =>\n      req.addBlockIds(hexBuffer(id))\n    )\n\n    res = await unary(opts.node, AccessAPI.GetEventsForBlockIDs, req)\n  }\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  const results = res.getResultsList()\n  ret.events = results.reduce((blocks, result) => {\n    const blockId = u8ToHex(result.getBlockId_asU8())\n    const blockHeight = result.getBlockHeight()\n    const blockTimestamp = result.getBlockTimestamp().toDate().toISOString()\n    const events = result.getEventsList()\n    events.forEach(event => {\n      blocks.push({\n        blockId,\n        blockHeight,\n        blockTimestamp,\n        type: event.getType(),\n        transactionId: u8ToHex(event.getTransactionId_asU8()),\n        transactionIndex: event.getTransactionIndex(),\n        eventIndex: event.getEventIndex(),\n        payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n      })\n    })\n    return blocks\n  }, [])\n\n  return ret\n}\n","import {GetBlockByIDRequest, GetBlockByHeightRequest, GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetBlock(ix, opts = {}) {\n  ix = await ix\n\n  let req\n  let res\n  if (ix.block.id) {\n    req = new GetBlockByIDRequest()\n    req.setId(hexBuffer(ix.block.id))\n\n    res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n  } else if (ix.block.height) {\n    req = new GetBlockByHeightRequest()\n    req.setHeight(Number(ix.block.height))\n\n    res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n  } else {\n    req = new GetLatestBlockRequest()\n\n    res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n  }\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nconst latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nexport async function sendGetLatestBlock(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetLatestBlockRequest()\n\n  if (ix.latestBlock && ix.latestBlock.isSealed) {\n    req.setIsSealed(ix.latestBlock.isSealed)\n    latestBlockDeprecationNotice()\n  }\n\n  if (ix.block && ix.block.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetBlockByIDRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetBlockById(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetBlockByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetBlockByHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nexport async function sendGetBlockByHeight(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetBlockByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {\n    isTransaction,\n    isGetTransaction,\n    isGetTransactionStatus,\n    isScript,\n    isGetAccount,\n    isGetEvents,\n    isGetBlock,\n    isGetLatestBlock,\n    isGetBlockById,\n    isGetBlockByHeight,\n    isPing,\n} from \"../interaction/interaction.js\"\nimport {sendTransaction} from \"./send-transaction.js\"\nimport {sendGetTransactionStatus} from \"./send-get-transaction-status.js\"\nimport {sendGetTransaction} from \"./send-get-transaction.js\"\nimport {sendExecuteScript} from \"./send-execute-script.js\"\nimport {sendGetAccount} from \"./send-get-account.js\"\nimport {sendGetEvents} from \"./send-get-events.js\"\nimport {sendGetBlock} from \"./send-get-block.js\"\nimport {sendGetLatestBlock} from \"./send-get-latest-block.js\"\nimport {sendGetBlockById} from \"./send-get-block-by-id.js\"\nimport {sendGetBlockByHeight} from \"./send-get-block-by-height.js\"\nimport {sendPing} from \"./send-ping.js\"\nimport {config} from \"@onflow/config\"\n\nexport const send = async (ix, opts = {}) => {\n    opts.node = opts.node || (await config().get(\"accessNode.api\"))\n    ix = await ix\n\n    switch (true) {\n        case isTransaction(ix):\n            return sendTransaction(ix, opts)\n        case isGetTransactionStatus(ix):\n            return sendGetTransactionStatus(ix, opts)\n        case isGetTransaction(ix):\n            return sendGetTransaction(ix, opts)\n        case isScript(ix):\n            return sendExecuteScript(ix, opts)\n        case isGetAccount(ix):\n            return sendGetAccount(ix, opts)\n        case isGetEvents(ix):\n            return sendGetEvents(ix, opts)\n        case isGetLatestBlock(ix):\n            return sendGetLatestBlock(ix, opts)\n        case isGetBlock(ix):\n            return sendGetBlock(ix, opts)\n        case isGetBlockById(ix):\n            return sendGetBlockById(ix, opts)\n        case isGetBlockByHeight(ix):\n            return sendGetBlockByHeight(ix, opts)\n        case isPing(ix):\n            return sendPing(ix, opts)\n        default:\n            return ix\n    }\n}\n","import {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetTransactionStatus(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransactionResult, req)\n\n  let events = res.getEventsList()\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.transactionStatus = {\n    status: res.getStatus(),\n    statusCode: res.getStatusCode(),\n    errorMessage: res.getErrorMessage(),\n    events: events.map(event => ({\n      type: event.getType(),\n      transactionId: u8ToHex(event.getTransactionId_asU8()),\n      transactionIndex: event.getTransactionIndex(),\n      eventIndex: event.getEventIndex(),\n      payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n    })),\n  }\n\n  return ret\n}\n","import {AccessAPI, PingRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nexport async function sendPing(ix, opts = {}) {\n  ix = await ix\n\n  const req = new PingRequest()\n\n  const res = await unary(opts.node, AccessAPI.Ping, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  return ret\n}\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    }\n  ])\n}\n","const latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async (i) => i\n\nconst decodeVoid = async () => null\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async (v) => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      (v) =>\n        new Promise(async (res) =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[\n      await recurseDecode(v.key, decoders, [...stack, v.key])\n    ] = await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeNumber,\n  Int: decodeNumber,\n  UInt8: decodeNumber,\n  Int8: decodeNumber,\n  UInt16: decodeNumber,\n  Int16: decodeNumber,\n  UInt32: decodeNumber,\n  Int32: decodeNumber,\n  UInt64: decodeNumber,\n  Int64: decodeNumber,\n  UInt128: decodeNumber,\n  Int128: decodeNumber,\n  UInt256: decodeNumber,\n  Int256: decodeNumber,\n  Word8: decodeNumber,\n  Word16: decodeNumber,\n  Word32: decodeNumber,\n  Word64: decodeNumber,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find((decoder) => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n  return await recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n\n  if (response.encodedData) {\n    return await decode(response.encodedData, decoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, decoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, decoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  }\n\n  return null\n}\n","import {isTransaction, Ok, interaction, pipe} from \"../interaction/interaction.js\"\nimport {send} from \"../send/sdk-send.js\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\n\nasync function getRefId (opts) {\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await send(ix, opts)\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"@onflow/config\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nexport async function resolveCadence(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    var cadence = get(ix, \"ix.cadence\")\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({})\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    ix.message.cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce(\n          (cadence, [key, value]) => cadence.replace(key, value),\n          cadence\n        )\n      )\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      ix.arguments[id].asArgument = cast(arg)\n    }\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.0\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    var old = last || ax\n    if (isFn(ax.resolve)) ax = await ax.resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer && ix.payer === old.tempId) {\n        ix.payer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = [...authorizations, ax.tempId]\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import { encode } from '@onflow/rlp';\n\nexport const encodeTransactionPayload = tx => rlpEncode(preparePayload(tx))\nexport const encodeTransactionEnvelope = tx => rlpEncode(prepareEnvelope(tx))\n\nconst paddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => paddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.script),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.gasLimit,\n    addressBuffer(tx.proposalKey.address),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(tx.payer),\n    tx.authorizers.map(addressBuffer),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  envelopeFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"script\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"gasLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst envelopeFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  inside.delete(ix.payer)\n  return Array.from(inside)\n}\n\nfunction findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set([ix.payer])\n  return Array.from(outside)\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    // if (!acct.role.proposer) {\n    //   ix.accounts[id].keyId = keyId\n    // }\n    ix.accounts[id].signature = signature\n  }\n}\n\nfunction buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.0\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  return {\n    script: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    gasLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: sansPrefix(ix.accounts[ix.payer].addr),\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import { get, pipe, Ok, Bad } from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, 'ix.validators', [])\n  return pipe(ix, validators.map(cb => ix => cb(ix, { Ok, Bad })))\n}   \n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\n\nimport {send} from \"../send/sdk-send.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveRefBlockId} from \"./resolve-ref-block-id.js\"\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\n\nexport const resolve = pipe([\n    resolveCadence,\n    resolveArguments,\n    resolveAccounts,\n    /* special */ execFetchRef,\n    /* special */ execFetchSequenceNumber,\n    resolveSignatures,\n    resolveFinalNormalization,\n    resolveValidators,\n])\n\nasync function execFetchRef(ix) {\n    if (isTransaction(ix) && ix.message.refBlock == null) {\n        ix.message.refBlock = (await send(build([getBlock()])).then(decode)).id\n    }\n    return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\nif (isTransaction(ix)) {\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n    ix.accounts[acct.tempId].sequenceNum = await send(await build([getAccount(acct.addr)])).then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n}\nreturn ix\n}\n  ","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {\n  interaction,\n  pipe,\n} from \"../interaction/interaction.js\"\nimport {config} from \"@onflow/config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\nimport {send as defaultSend} from \"./sdk-send.js\"\n\nexport const send = async (args = [], opts = {}) => {\n  const sendFunction = await config().get(\"sdk.send\", opts.send || defaultSend)\n  const resolveFunction = await config().get(\n    \"sdk.resolve\",\n    opts.resolve || defaultResolve\n  )\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFunction(await resolveFunction(args), opts)\n}\n\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"@onflow/config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nexport function latestBlock(...args) {\n  let opts = args[1] || (typeof args[0] === \"object\" ? args[0] : undefined)\n  let isSealed = typeof args[0] === \"boolean\" ? args[0] : undefined\n\n  if (typeof args[0] === \"object\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing options as the first arguement to the latestBlock function has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0007-deprecate-opts-first-arg-latest-block\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )\n  }\n\n  return send([getBlock(isSealed)], opts).then(decode)\n}\n","import {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\nexport function account(address, opts) {\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {pipe, makeAuthorizer} from \"../interaction/interaction.js\"\n\nconst roles = {\n  authorizer: true,\n}\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map((authz) => {\n      return typeof authz === \"function\"\n        ? makeAuthorizer({resolve: authz, role: roles, roles})\n        : makeAuthorizer({...authz, role: roles, roles})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n    return update('ix.validators', validators => \n        Array.isArray(validators) ? validators.push(cb) : [cb]\n    )\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block height and isSealed.\")\n      if (ix.block.id) return Bad(ix, \"Unable to specify both block height and block id.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\")\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEvents(eventType, start, end) {\n\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )  \n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockHeightRange(eventType, start, end) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockIds(eventType, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetLatestBlock} from \"../interaction/interaction.js\"\n\nexport function getLatestBlock(isSealed = false) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetLatestBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockById} from \"../interaction/interaction.js\"\n\nexport function getBlockById(id) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockById,\n    ix => {\n      ix.block.ids = [id]\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockByHeight} from \"../interaction/interaction.js\"\n\nexport function getBlockByHeight(height) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockByHeight,\n    ix => {\n      ix.block.height = height\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function limit(computeLimit) {\n  return pipe([\n    ix => {\n      ix.message.computeLimit = computeLimit\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeParam} from \"../interaction/interaction.js\"\n\nexport function params(px = []) {\n  return pipe(px.map(makeParam))\n}\n\nexport function param(value, xform = null, key = null) {\n  return {key, value, xform: null}\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {pipe, makeProposer} from \"../interaction/interaction.js\"\n\nconst roles = {\n  proposer: true,\n}\n\nexport async function proposer(authz) {\n  return typeof authz === \"function\"\n    ? makeProposer({resolve: authz, role: roles, roles})\n    : makeProposer({...authz, role: roles, roles})\n}\n","import {pipe, makePayer} from \"../interaction/interaction.js\"\n\nconst roles = {\n  payer: true\n}\n\nexport function payer(authz) {\n  return typeof authz === \"function\"\n    ? makePayer({resolve: authz, role: roles, roles})\n    : makePayer({...authz, role: roles, roles})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([\n    makeScript,\n    put(\"ix.cadence\", template(...args))\n  ])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.computeLimit = ix.message.computeLimit || DEFAULT_COMPUTE_LIMIT\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import { Ok, Bad } from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, { Ok, Bad }) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {resolveCadence} from \"./resolve-cadence.js\"\n\nexport function resolveParams (ix) {\n  console.error(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n\n      The resolver sdk.resolveParams is being replaced with the package @onflow/sdk-resolve-cadence\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0002-deprecate-resolve-params-resolver\n\n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )\n\n  return resolveCadence(ix)\n}\n"],"names":["IX","KEYS","Set","Object","keys","JSON","parse","interaction","isArray","d","Array","isNull","CHARS","split","randChar","Math","random","length","uuid","from","join","Ok","ix","status","Bad","reason","makeIx","wat","tag","makeAccount","acct","tempId","accounts","addr","keyId","sequenceNum","signature","signingFunction","resolve","role","makeParam","param","message","params","push","key","value","asParam","xform","makeArgument","arg","arguments","asArgument","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makeGetLatestBlock","makeGetBlockById","makeGetBlockByHeight","makePing","makeGetBlock","makeGetBlockHeader","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isGetLatestBlock","isGetBlockById","isGetBlockByHeight","isPing","isGetBlock","isGetBlockHeader","isOk","isBad","why","recPipe","fns","body","recover","result","has","Error","hardMode","hd","rest","cur","hasOwnProperty","isInteraction","e","then","pipe","arg1","arg2","identity","v","get","fallback","assigns","put","update","fn","destroy","build","response","unary","host","method","request","Promise","reject","grpc","onEnd","statusMessage","Code","OK","setDefaultTransport","NodeHttpTransport","hexBuffer","hex","Buffer","addressBuffer","padStart","pad","u8ToHex","u8","toString","argumentBuffer","stringify","send","opts","node","tx","Transaction","setScript","script","scriptBuffer","cadence","setGasLimit","computeLimit","setReferenceBlockId","refBlock","setPayer","sansPrefix","payer","forEach","addArguments","authorizations","map","reduce","prev","current","find","item","addAuthorizers","proposalKey","ProposalKey","setAddress","proposer","setKeyId","setSequenceNumber","setProposalKey","values","sig","Signature","setSignature","addPayloadSignatures","error","console","addEnvelopeSignatures","req","SendTransactionRequest","setTransaction","t1","Date","now","AccessAPI","SendTransaction","res","t2","ret","transactionId","getId_asU8","window","dispatchEvent","CustomEvent","detail","txId","delta","sendTransaction","GetTransactionRequest","setId","transaction","id","GetTransactionResult","events","getEventsList","transactionStatus","getStatus","statusCode","getStatusCode","errorMessage","getErrorMessage","event","type","getType","getTransactionId_asU8","transactionIndex","getTransactionIndex","eventIndex","getEventIndex","payload","getPayload_asU8","sendGetTransactionStatus","GetTransaction","unwrapSignature","address","getAddress_asU8","getKeyId","getSignature_asU8","getTransaction","getScript_asU8","args","getArgumentsList","referenceBlockId","getReferenceBlockId_asU8","gasLimit","getGasLimit","getProposalKey","sequenceNumber","getSequenceNumber","getPayer_asU8","authorizers","getAuthorizersList","payloadSignatures","getPayloadSignaturesList","envelopeSignatures","getEnvelopeSignaturesList","sendGetTransaction","encodedData","getValue_asU8","block","ExecuteScriptAtBlockIDRequest","setBlockId","code","ExecuteScriptAtBlockID","height","ExecuteScriptAtBlockHeightRequest","setBlockHeight","Number","ExecuteScriptAtBlockHeight","ExecuteScriptAtLatestBlockRequest","ExecuteScriptAtLatestBlock","sendExecuteScript","GetAccountAtBlockHeightRequest","GetAccountAtLatestBlockRequest","setHeight","account","GetAccountAtBlockHeight","GetAccountAtLatestBlock","contractsMap","getAccount","contracts","getContractsMap","getEntryList","acc","contract","TextDecoder","decode","UInt8Array","withPrefix","balance","getBalance","getCode_asU8","getKeysList","publicKey","index","getIndex","getPublicKey_asU8","signAlgo","getSignAlgo","hashAlgo","getHashAlgo","weight","getWeight","revoked","getRevoked","sendGetAccount","results","getResultsList","blocks","blockId","getBlockId_asU8","blockHeight","getBlockHeight","blockTimestamp","getBlockTimestamp","toDate","toISOString","start","GetEventsForHeightRangeRequest","GetEventsForBlockIDsRequest","setType","eventType","setStartHeight","setEndHeight","end","GetEventsForHeightRange","blockIds","addBlockIds","GetEventsForBlockIDs","sendGetEvents","GetLatestBlockRequest","latestBlock","isSealed","setIsSealed","replace","trim","GetLatestBlock","getBlock","collectionGuarantees","getCollectionGuaranteesList","blockSeals","getBlockSealsList","signatures","getSignaturesList","parentId","getParentId_asU8","getHeight","timestamp","getTimestamp","collectionGuarantee","collectionId","getCollectionId_asU8","blockSeal","executionReceiptId","getExecutionReceiptId_asU8","executionReceiptSignatures","getExecutionReceiptSignaturesList","resultApprovalSignatures","getResultApprovalSignaturesList","sendGetLatestBlock","GetBlockByIDRequest","GetBlockByID","GetBlockByHeightRequest","GetBlockByHeight","sendGetBlock","sendGetBlockById","sendGetBlockByHeight","PingRequest","Ping","sendPing","config","decodeNumber","num","_","stack","decodeImplicit","i","decodeComposite","composite","decoders","fields","recurseDecode","name","decoded","decoder","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","optional","Reference","array","all","Dictionary","dictionary","Event","Resource","Struct","lookup","found","test","RegExp","substring","decodeInstructions","customDecoders","decodeResponse","data","blockHeader","_exit2","resolveRefBlockId","getRefId","resolveCadence","invariant","isString","where","entries","isFn","resolveArguments","cast","Symbol","iterator","pact","state","s","o","_settle","bind","observer","_Pact","prototype","onFulfilled","onRejected","this","callback","_this","thenable","resolveAccounts","collectAccounts","last","depth","curr","target","check","step","_cycle","next","done","_isSettledPact","_fixup","TypeError","ax","old","authorizer","f_type","f_vsn","roles","buildPreSignable","paddedHexBuffer","argumentToString","rlpEncode","encode","preparePayload","validatePayload","preparePayloadSignatures","signers","collectSigners","payloadSigs","signerIndex","sort","a","b","Map","addSigner","set","payloadFields","field","checkField","proposalKeyFields","isNumber","isObject","defaultVal","envelopeFields","payloadSigFields","obj","base","missingFieldError","invalidFieldError","printFieldName","resolveSignatures","insideSigners","inside","add","findInsideSigners","prepForEncoding","insidePayload","fetchSignature","outsideSigners","outside","findOutsideSigners","outsidePayload","validateEnvelope","prepareEnvelope","encodeOutsideMessage","buildSignable","cid","resolveValidators","validators","cb","_send$then","defaultSend","sendFunction","defaultResolve","resolveFunction","decodersFromConfig","pattern","fromEntries","undefined","warn","authz","authorization","validator","atBlockHeight","atBlockId","getEvents","getEventsAtBlockHeightRange","getEventsAtBlockIds","getBlockHeader","getLatestBlock","getBlockById","ids","getBlockByHeight","getTransactionStatus","limit","px","ping","ref","template","DEFAULT_SCRIPT_ACCOUNTS","predicate","resolveParams"],"mappings":"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"}